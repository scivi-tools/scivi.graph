!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Louvain=n()}}(function(){return function n(e,r,t){function o(u,f){if(!r[u]){if(!e[u]){var a="function"==typeof require&&require;if(!f&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var d=r[u]={exports:{}};e[u][0].call(d.exports,function(n){var r=e[u][1][n];return o(r||n)},d,d.exports,n,e,r,t)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(n,e,r){var t={detectClusters:function(e){var r=n("ngraph.graph"),t=n("ngraph.louvain"),o=r();e.nodes.forEach(function(n){o.addNode(n.id,n)}),e.edges.forEach(function(n){o.addLink(n.source.id,n.target.id)});var i=t(o),u={},f=0;o.forEachNode(function(n){var e=i.getClass(n.id),r=u[e];void 0===r&&(r=f++,u[e]=r),n.data.groupID=r})}};e.exports=t},{"ngraph.graph":3,"ngraph.louvain":4}],2:[function(n,e,r){e.exports=function(n){!function(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(n.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}(n);var e=function(n){var e=Object.create(null);return{on:function(r,t,o){if("function"!=typeof t)throw new Error("callback is expected to be a function");var i=e[r];return i||(i=e[r]=[]),i.push({callback:t,ctx:o}),n},off:function(r,t){if(void 0===r)return e=Object.create(null),n;if(e[r])if("function"!=typeof t)delete e[r];else for(var o=e[r],i=0;i<o.length;++i)o[i].callback===t&&o.splice(i,1);return n},fire:function(r){var t=e[r];if(!t)return n;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<t.length;++i){var u=t[i];u.callback.apply(u.ctx,o)}return n}}}(n);return n.on=e.on,n.off=e.off,n.fire=e.fire,n}},{}],3:[function(n,e,r){function t(n,e){if(!e)return-1;if(e.indexOf)return e.indexOf(n);var r,t=e.length;for(r=0;r<t;r+=1)if(e[r]===n)return r;return-1}function o(n,e){n.links?n.links.push(e):n.links=[e]}function i(n,e,r,t){this.fromId=n,this.toId=e,this.data=r,this.id=t}function u(n,e){return n.toString()+"ðŸ‘‰ "+e.toString()}e.exports=function(n){function e(n,e){if(void 0===n)throw new Error("Invalid node identifier");x();var t=r(n);return t?(t.data=e,k(t,"update")):(t=new function(n,e){this.id=n,this.links=null,this.data=e}(n,e),p++,k(t,"add")),s[n]=t,C(),t}function r(n){return s[n]}function a(n){var e=r(n);if(!e)return!1;x();var t=e.links;if(t){e.links=null;for(var o=0;o<t.length;++o)c(t[o])}return delete s[n],p--,k(e,"remove"),C(),!0}function c(n){if(!n)return!1;var e=t(n,h);if(e<0)return!1;x(),h.splice(e,1);var o=r(n.fromId),i=r(n.toId);return o&&(e=t(n,o.links))>=0&&o.links.splice(e,1),i&&(e=t(n,i.links))>=0&&i.links.splice(e,1),b(n,"remove"),C(),!0}function d(n,e){var t,o=r(n);if(!o||!o.links)return null;for(t=0;t<o.links.length;++t){var i=o.links[t];if(i.fromId===n&&i.toId===e)return i}return null}function l(){}"uniqueLinkId"in(n=n||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),n.multigraph=n.uniqueLinkId),void 0===n.multigraph&&(n.multigraph=!1);var s="function"==typeof Object.create?Object.create(null):{},h=[],g={},p=0,v=0,m=Object.keys?function(n){if("function"==typeof n)for(var e=Object.keys(s),r=0;r<e.length;++r)if(n(s[e[r]]))return!0}:function(n){if("function"==typeof n){var e;for(e in s)if(n(s[e]))return!0}},w=n.multigraph?function(n,e,r){var t=u(n,e),o=g.hasOwnProperty(t);if(o||d(n,e)){o||(g[t]=0);var f="@"+ ++g[t];t=u(n+f,e+f)}return new i(n,e,r,t)}:function(n,e,r){return new i(n,e,r,u(n,e))},y=[],b=l,k=l,x=l,C=l,I={addNode:e,addLink:function(n,t,i){x();var u=r(n)||e(n),f=r(t)||e(t),a=w(n,t,i);return h.push(a),o(u,a),n!==t&&o(f,a),b(a,"add"),C(),a},removeLink:c,removeNode:a,getNode:r,getNodesCount:function(){return p},getLinksCount:function(){return h.length},getLinks:function(n){var e=r(n);return e?e.links:null},forEachNode:m,forEachLinkedNode:function(n,e,t){var o=r(n);if(o&&o.links&&"function"==typeof e)return t?function(n,e,r){for(var t=0;t<n.length;++t){var o=n[t];if(o.fromId===e&&r(s[o.toId],o))return!0}}(o.links,n,e):function(n,e,r){for(var t=0;t<n.length;++t){var o=n[t],i=o.fromId===e?o.toId:o.fromId;if(r(s[i],o))return!0}}(o.links,n,e)},forEachLink:function(n){var e,r;if("function"==typeof n)for(e=0,r=h.length;e<r;++e)n(h[e])},beginUpdate:x,endUpdate:C,clear:function(){x(),m(function(n){a(n.id)}),C()},hasLink:d,hasNode:r,getLink:d};return f(I),function(){var n=I.on;I.on=function(){return I.beginUpdate=x=function(){v+=1},I.endUpdate=C=function(){0==(v-=1)&&y.length>0&&(I.fire("changed",y),y.length=0)},b=function(n,e){y.push({link:n,changeType:e})},k=function(n,e){y.push({node:n,changeType:e})},I.on=n,n.apply(I,arguments)}}(),I};var f=n("ngraph.events")},{"ngraph.events":2}],4:[function(n,e,r){var t=n("./lib/createCommunityGraph.js"),o=n("./lib/createCommunity.js");e.exports=function(n){var e=t(n),r=o(e),i=r.modularity(),u=r.optimizeModularity();return{canCoarse:function(){return u},originalModularity:i,newModularity:r.modularity(),getClass:function(n){var t=e.getNodeIdFromNgraph(n);return r.getClass(t)}}}},{"./lib/createCommunity.js":5,"./lib/createCommunityGraph.js":6}],5:[function(n,e,r){var t=n("ngraph.random"),o=t.random(42),i=t.randomIterator;e.exports=function(n){function e(){for(var n=0,e=0;e<t;++e)if(u[e]>0){var o=u[e]/r;n+=f[e]/r-o*o}return n}for(var r=n.weight,t=n.nodeCount,u=new Float32Array(t),f=new Float32Array(t),a=new Uint32Array(t),c=0;c<t;++c)a[c]=c,u[c]=n.getWeightedDegree(c),f[c]=n.getSelfLoopsCount(c);return{modularity:e,optimizeModularity:function(){var c=function(){for(var n=[],e=0;e<t;++e)n[e]=e;return i(n,o).shuffle(),n}(),d=e(),l=d,s=!1;do{var h=0;l=d;for(var g=0;g<c.length;++g){var p=c[g],v=a[p],m=function(e){var r=new Map;return r.set(a[e],0),n.forEachNeigbour(e,function(n,e){var t=a[n],o=r.get(t)||0;r.set(t,o+e)}),r}(p),w=m.get(v);!function(e,r,t){u[r]-=n.getWeightedDegree(e),f[r]-=2*t+n.getSelfLoopsCount(e),a[e]=-1}(p,v,w);var y=n.getWeightedDegree(p),b=v,k=0;m.forEach(function(n,e){var t=function(n,e,t,o){var i=u[t];return e-i*o/r}(0,n,e,y);t<=k||(b=e,k=t)});var x=m.get(b);!function(e,r,t){u[r]+=n.getWeightedDegree(e),f[r]+=2*t+n.getSelfLoopsCount(e),a[e]=r}(p,b,x),b!==v&&(h+=1)}d=e(),h>0&&(s=!0)}while(h>0&&d-l>1e-6);return s},getClass:function(n){return a[n]}}}},{"ngraph.random":7}],6:[function(n,e,r){e.exports=function(n){function e(n){var e=a.get(n);if(void 0===e)throw new Error("Unknown node id: "+n);return e}function r(n,e,r){var t={id:e,weight:r};n.neighbours?n.neighbours.push(t):n.neighbours=[t]}function t(n){return o(n).weightedDegree}function o(n){var e=f[n];if(!e)throw new Error("cannot find node with id: "+n);return e}var i=n.getNodesCount(),u=0,f=[],a=new Map;return n.forEachNode(function(n){!function(n){var e=f.length;a.set(n,e),f.push({selfLoopsCount:0,weightedDegree:0,neighbours:null})}(n.id)}),n.forEachLink(function(n){var t=e(n.fromId),o=e(n.toId),i=function(n){return n?"number"==typeof n?n:"number"==typeof n.weight?n.weight:1:1}(n.data),u=f[t],a=f[o];t===o?(u.selfLoopsCount+=i,u.weightedDegree+=i):(r(u,o,i),r(a,t,i),u.weightedDegree+=i,a.weightedDegree+=i)}),u=function(){for(var n=0,e=0;e<i;++e)n+=t(e);return n}(),{nodeCount:i,weight:u,forEachNeigbour:function(n,e){var r=o(n);if(r.neighbours)for(var t=0;t<r.neighbours.length;++t){var i=r.neighbours[t];e(i.id,i.weight)}},getWeightedDegree:t,getSelfLoopsCount:function(n){return o(n).selfLoopsCount},getNodeIdFromNgraph:e}}},{}],7:[function(n,e,r){function t(n){var e="number"==typeof n?n:+new Date,r=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,(268435455&(e=4294967295&(3042594569^e^e>>>16)))/268435456};return{next:function(n){return Math.floor(r()*n)},nextDouble:function(){return r()}}}e.exports={random:t,randomIterator:function(n,e){var r=e||t();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var t,o,i;for(t=n.length-1;t>0;--t)o=r.next(t+1),i=n[o],n[o]=n[t],n[t]=i,e(i);n.length&&e(n[0])},shuffle:function(){var e,t,o;for(e=n.length-1;e>0;--e)t=r.next(e+1),o=n[t],n[t]=n[e],n[e]=o;return n}}}}},{}]},{},[1])(1)});